---
title: "BellaBeat Case Study"
author: "Mishika"
date: "2021-11-30"
output:
  html_document: default
  pdf_document: default
---
![](BellaBeat.png)

## Introduction 
Bellabeat is a high-tech manufacturer of health-focused products for women. Collecting data on activity, sleep, stress, and reproductive health has allowed Bellabeat to empower women with knowledge about their own health and habits. Although Bellabeat is a successful small company, they have the potential to become a larger player in the global smart device market. Urška Sršen, cofounder and Chief Creative Officer of Bellabeat, believes that analyzing smart device fitness data could help unlock new growth opportunities for the company.

### Step 1: Ask
#### Business Task 
To identify potential opportunities for growth and provide recommendations for the Bellabeat marketing strategy improvement based on trends in smart device usage.

#### Key Stakeholders
* Urška Sršen: Bellabeat's cofounder and Chief Creative Officer
* Sando Mur: Mathematician and Bellabeat’s co-founder

#### Key questions to explore
1. What are some trends in smart device usage?
2. How could these trends apply to Bellabeat customers?
3. How could these trends help influence Bellabeat marketing strategy?

### Step 2: Prepare
The data being used in this case study can be found here: [FitBit Fitness Tracker Data](https://www.kaggle.com/datasets/arashnic/fitbit?resource=download)

The data is stored and uploaded in R Studio. This Kaggle data set contains personal fitness tracker from thirty fitbit users. Thirty eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring. It includes information about daily activity, steps, and heart rate that can be used to explore users’ habits.

The dataset has 18 CSV. The data also follow a ROCCC approach:

* <b>Reliability</b>: The data is from 30 FitBit users who consented to the submission of personal tracker data and generated by from a distributed survey via Amazon Mechanical Turk.
* <b>Original</b>: The data is from 30 FitBit users who consented to the submission of personal tracker data via Amazon Mechanical Turk.
* <b>Comprehensive</b>: Data minute-level output for physical activity, heart rate, and sleep monitoring. While the data tracks many factors in the user activity and sleep, but the sample size is small and most data is recorded during certain days of the week.
* <b>Current</b>: Data is from March 2016 to May 2016. Data is not current so the users habit may be different now.
* <b>Cited</b>: Unknown.

### Step 3: Process 
To process the data, we need to load some packages and libraries

```{r}
install.packages("tidyverse")
install.packages("tidyr")
install.packages("dplyr")
install.packages("ggplot")
install.packages("here")
install.packages("janitor")
install.packages("lubridate")
install.packages("skimr")

library(tidyverse)
library(lubridate)
library(dplyr)
library(ggplot2)
library(tidyr)
library(here)
library(janitor)
library(skimr)
```
Now we import some datasets and define variables as dataframes 

```{r}
activity <- read_csv("Fitabase Data 4.12.16-5.12.16/dailyActivity_merged.csv")
calories <- read_csv("Fitabase Data 4.12.16-5.12.16/dailyCalories_merged.csv")
intensities <- read_csv("Fitabase Data 4.12.16-5.12.16/hourlyIntensities_merged.csv")
sleep <- read_csv("Fitabase Data 4.12.16-5.12.16/sleepDay_merged.csv")
weight <- read_csv("Fitabase Data 4.12.16-5.12.16/weightLogInfo_merged.csv")
dailySteps <- read_csv("Fitabase Data 4.12.16-5.12.16/dailySteps_merged.csv")
```


Now, we explore the dataset 

```{r}
head(activity)
colnames(activity)
head(weight)
colnames(weight)
head(intensities)
colnames(intensities)
head(sleep)
colnames(sleep)
```
Check for NA and duplicates

```{r}
sum(is.na(activity))
sum(is.na(calories))
sum(is.na(dailySteps))
sum(is.na(intensities))
sum(is.na(sleep))
sum(is.na(weight))


sum(duplicated(activity))
sum(duplicated(calories))
sum(duplicated(dailySteps))
sum(duplicated(intensities))
sum(duplicated(sleep))
sum(duplicated(weight))
```

Removing duplicates in sleep

```{r}
sleep <- sleep[!duplicated(sleep), ]
sum(duplicated(sleep))
```

Check for unique number of participants in each category
```{r}
n_distinct(activity$Id)  
n_distinct(calories$Id)   
n_distinct(intensities$Id)
n_distinct(sleep$Id)
n_distinct(weight$Id)
```




⛔ Exploring the dataset, we realise that then database has the following limitations:

1. Only 30 user data is available. The central limit theorem general rule of n≥30 applies and we can use the t test for statstic reference. However, a larger sample size is preferred for the analysis.
2. Upon further investigation with n_distinct() to check for unique user Id, the set has 33 user data from daily activity, 24 from sleep and only 8 from weight. There are 3 extra users and some users did not record their data for tracking daily activity and sleep.
3. For the 8 user data for weight, 5 users manually entered their weight and 3 recorded via a connected wifi device (eg: wifi scale).
4. Most data is recorded from Tuesday to Thursday, which may not be comprehensive enough to form an accurate analysis.

Further converting the data into date time format

```{r}
# intensities
intensities$ActivityHour=as.POSIXct(intensities$ActivityHour, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
intensities$time <- format(intensities$ActivityHour, format = "%H:%M:%S")
intensities$date <- format(intensities$ActivityHour, format = "%m/%d/%y")
# activity
activity$ActivityDate=as.POSIXct(activity$ActivityDate, format="%m/%d/%Y", tz=Sys.timezone())
activity$date <- format(activity$ActivityDate, format = "%m/%d/%y")
# sleep
sleep$SleepDay=as.POSIXct(sleep$SleepDay, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
sleep$date <- format(sleep$SleepDay, format = "%m/%d/%y")
# weight
weight$Date=as.POSIXct(weight$Date, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
weight$date <- format(weight$Date, format = "%m/%d/%y")


```

### Step 4: Analyse
In this stage, we explore the data further summarizing the data for thw following:

1.Checking for significant change in weight

```{r}
weight%>%
  group_by(Id)%>%
  summarise(min(WeightKg),max(WeightKg))
```

2. Checking for significant change in activity

```{r}
activity %>%  
  select(TotalSteps,
         TotalDistance,
         SedentaryMinutes, Calories) %>%
  summary()
```

3. Active minutes per category

```{r}
activity %>%
  select(VeryActiveMinutes, FairlyActiveMinutes, LightlyActiveMinutes) %>%
  summary()

```

4. Calories

```{r}
calories %>%
  select(Calories) %>%
  summary()
```

5. Sleep

```{r}
sleep %>%
  select(TotalSleepRecords, TotalMinutesAsleep, TotalTimeInBed) %>%
  summary()
```

6. Weight

```{r}
weight %>%
  select(WeightKg, BMI) %>%
  summary()
```

The observations from the exploration is as follows:

* Sedentary minutes on average is 16.5 hours
* The average number of steps per day is 7638. The CDC recommends people take 10,000 steps daily
* The majority of the participants are lightly active
* The average participant burns 97 calories per hour
* On average, participants sleep for 7 hours

#### Merging the datasets 
Before visualizing the data, we will merge the datasets using inner join.

```{r}
merged1 <- merge(activity,sleep,by = c("Id","date"), all=TRUE)
merged_data <- merge(merged1, weight, by = c("Id","date"), all=TRUE)
head(merged_data)
```


### Step 5: Share 

Now that out dataset is merged, we showcase the results through visualization

#### Total Steps vs Calories 
```{r}
ggplot(data = activity, aes(x = TotalSteps, y = Calories)) + geom_point(color = "darkgreen") + geom_smooth() + labs(title = "Total Steps vs. Calories")
```

From the scatter plot above, we observe that there exists a correlation between total number of steps taken and calories burned. The more steps each participant takes, the more calories they burn

#### Total time asleep vs Total time in bed

```{r}
ggplot(data = sleep, aes(x = TotalMinutesAsleep, y = TotalTimeInBed)) + geom_point(color='orange') + labs(title = "Total time asleep vs Total time in bed")
```

From this chart, we can see a positive correlation between total time asleep vs total time in bed. To improve sleep quality for its users, bellabeat should consider having a section where users can customize their sleep schedule to ensure consistency.

#### Sleep Duration and Sedentary Time
```{r}
ggplot(data = merged1, mapping = aes(x = SedentaryMinutes, y = TotalMinutesAsleep)) + 
  geom_point() + labs(title= "Sleep Duration and Sedentary Time")
```

From looking at the graph above, we can see there is a negative correlation between SedentaryMinutes and TotalMinutesAsleep. This means that the less active a participant is, the less sleep they tend to get.

Now, we want to look at whether the day of the week affects our activity levels and sleep

```{r}
merged_data <- mutate(merged_data, 
                      day = wday(SleepDay, label = TRUE))
summarized_activity_sleep <- merged_data %>% 
  group_by(day) %>% 
  summarise(AvgDailySteps = mean(TotalSteps),
            AvgAsleepMinutes = mean(TotalMinutesAsleep),
            AvgAwakeTimeInBed = mean(TotalTimeInBed), 
            AvgSedentaryMinutes = mean(SedentaryMinutes),
            AvgLightlyActiveMinutes = mean(LightlyActiveMinutes),
            AvgFairlyActiveMinutes = mean(FairlyActiveMinutes),
            AvgVeryActiveMinutes = mean(VeryActiveMinutes), 
            AvgCalories = mean(Calories))
summarized_activity_sleep
```

Visualizing the same though a bar plot

```{r}
ggplot(data = summarized_activity_sleep, mapping = aes(x = day, y = AvgDailySteps)) +
  geom_col(fill = "steelblue") + labs(title = "Daily Step Count")
```

The bar graph above shows us that participants are most active on saturdays and least active on sundays

#### Active minutes vs Calories 

```{r}
active_minutes_vs_calories <- ggplot(data = merged_data) + 
  geom_point(mapping=aes(x=Calories, y=FairlyActiveMinutes), color = "maroon", alpha = 1/3) +
  geom_smooth(method = loess,formula =y ~ x, mapping=aes(x=Calories, y=FairlyActiveMinutes, color=FairlyActiveMinutes), color = "maroon", se = FALSE) +
  
  geom_point(mapping=aes(x=Calories, y=VeryActiveMinutes), color = "forestgreen", alpha = 1/3) +
  geom_smooth(method = loess,formula =y ~ x,mapping=aes(x=Calories, y=VeryActiveMinutes, color=VeryActiveMinutes), color = "forestgreen", se = FALSE) +
  
  geom_point(mapping=aes(x=Calories, y=LightlyActiveMinutes), color = "orange", alpha = 1/3) +
  geom_smooth(method = loess,formula =y ~ x,mapping=aes(x=Calories, y=LightlyActiveMinutes, color=LightlyActiveMinutes), color = "orange", se = FALSE) +
  
  geom_point(mapping=aes(x=Calories, y=SedentaryMinutes), color = "steelblue", alpha = 1/3) +
  geom_smooth(method = loess,formula =y ~ x,mapping=aes(x=Calories, y=SedentaryMinutes, color=SedentaryeMinutes), color = "steelblue", se = FALSE) +
  
  annotate("text", x=4800, y=160, label="Very Active", color="black", size=3)+
  annotate("text", x=4800, y=0, label="Fairly Active", color="black", size=3)+
  annotate("text", x=4800, y=500, label="Sedentary", color="black", size=3)+
  annotate("text", x=4800, y=250, label="Lightly  Active", color="black", size=3)+
  labs(x = "Calories", y = "Active Minutes", title="Calories vs Active Minutes")
active_minutes_vs_calories 
```

Through this graph, we observe that a high volume of moderate-to-vigorous physical activity is achieved by a very small proportion of the population.

### Step 6: Act

After analyzing the FitBit Fitness Tracker data, we came up with some recommendations for Bellabeat marketing strategy based on trends in smart device usage:


1. As stated previously, the average number of steps per day is 7,638. This is lower than what the CDC recommends. According to CDC's official website: 8,000 steps per day was associated with a 51% lower risk for all-cause mortality (or death from all causes). Taking 12,000 steps per day was associated with a 65% lower risk compared with taking 4,000 steps. one thing Bellabeat can do is suggest that users take at least 8,000 steps per day and explain the benefits that come with it.

2. The majority of participants are lightly active. Bellabeat should offer a progression system in the app to encourage participants to become at least fairly active.

3. Bellabeat can suggest some ideas for low calorie breakfast, lunch, and dinner foods to help users that want to lose weight.

4. 54% of the users who recorded their sleep data spent 55 minutes awake in bed before falling asleep.
Actionable: If users want to improve the quality of their sleep, Bellabeat should consider using app notifications reminding users to get enough rest, as well as recommending reducing sedentary time.

5. We see the most change on Saturday: users take more steps, burn more calories, and spend less time sedentary. Sunday is the most "lazy" day for users.
Actionable: Bellabeat can use this knowledge to remind users to go for a walk or a jog on saturdays and motivate users to go out and continue exercising on Sundays.
